# May 10, 2021

## New things learnt
When you do ```auth.createUserWithEmailAndPassword(email,password)```, there is a loading state which we need to handle

Within AuthContext.js
```
const [loading,setLoading] = useState(true)

useEffect(()=>{
    auth.onAuthStateChanged((user) => {
        setLoading(false)
        setCurrentUser(user)
    })
})

return (
    <AuthContext.Provider value={value}>
        {!loading && children}
    </AuthContext.Provider>
)
```

## Routing
within App.js
```
import {BrowserRouter as Router, Switch, Route} from "react-router-dom"
import Signup from "./signup"

return (
    <div>
        <Router>
            <AuthProvider>
                <Switch>
                    <Route path="/signup" component={Signup}>
                </Switch>
            </AuthProvider>
        </Router>
    </div>
)
```

## Login
Within AuthContext.js
```
const login = (email, password) => auth.signInWithEmailAndPassword(email, password)

const value = {
    currentUser,
    login,
    signup
}

return (
    <AuthContext.Provider value={value}>
     {!loading && children}
    </AuthContext.Provider>
)
```

Within  Login.js

```
import {useAuth} from "./AuthContext.js"

const Login = () => {
    const {login} = useAuth

    const handleSubmt = (e) => {
        e.preventDefault()

        try{
            login(email, password)
        }catch{

        }
    }
    return(
        <div>
            <form onSubmit={handleSubmit}>
            </form>
        </div>
    )
}
```

## Redirect after login
```
import {useHistory} from "react-router-dom"

const Login = () => {
    
    const history = useHistory
    const handleSubmit = (e) => {
        e.preventDefault()

        try{
            ...
            history.push("/")
        }
    }
    return (
        <div>
        ...
        </div>
    )
}
```

[Back to journal](README.md)